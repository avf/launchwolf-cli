<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<style>
			main {
				width: 66%;
				margin: auto;
			}
		</style>
		<!-- Begin LaunchWolf Subscribe Form Styles -->
		<style>
			.launchwolf-subscribe-form {
				text-align: center;
				font-family: Helvetica, sans-serif;
				padding: 1rem;
				box-sizing: border-box;
			}

			.launchwolf-subscribe-form * {
				box-sizing: border-box;
			}

			.launchwolf-subscribe-form-title {
				margin: 0.5rem auto;
				font-weight: 900;
				font-size: 1.125rem;
			}

			.launchwolf-form-control {
				display: block;
				width: 100%;
				font-size: 1rem;
				padding: 0.375rem 0.75rem;
				margin: 1rem 0;
			}

			.launchwolf-subscribe-form-small-text {
				display: block;
				color: #6c757d;
				font-size: 0.75rem;
				margin: 1rem 0;
			}

			.launchwolf-bordered {
				border: 1px solid rgba(0, 0, 0, 0.125);
				border-radius: 0.25rem;
			}

			.launchwolf-subscribe-button {
				color: #fff;
				background-color: #007bff;
				border-color: #007bff;
				text-align: center;
				white-space: nowrap;
				font-weight: 400;
				font-size: 1rem;
				padding: 0.375rem 0.75rem;
				line-height: 1.5;
				border-radius: 0.25rem;
			}

			.launchwolf-subscribe-button:not(:disabled):not(.disabled) {
				cursor: pointer;
			}

			.launchwolf-alert {
				padding: 0.75rem 1.25rem;
				margin-top: 1rem;
				border: 1px solid transparent;
				border-radius: 0.25rem;
			}

			.launchwolf-alert-success {
				color: #155724;
				background-color: #d4edda;
				border-color: #c3e6cb;
			}

			.launchwolf-alert-error {
				color: #721c24;
				background-color: #f8d7da;
				border-color: #f5c6cb;
			}
		</style>
		<!-- End LaunchWolf Subscribe Form Styles -->
	</head>
	<body>
		<main>
			<!-- Begin LaunchWolf Subscribe Form -->
			<div class="launchwolf-subscribe-form launchwolf-bordered">
				<h5 class="launchwolf-subscribe-form-title">
					Want to learn more? Sign up for our newsletter.
				</h5>
				<form
					action="http://localhost:8888/.netlify/functions/email-mailjet"
					method="POST"
					name="launchwolf-subscribe-form"
					onsubmit="launchwolf_subscribeFormSubmitted(event)"
				>
					<input
						type="text"
						value=""
						placeholder="Your First Name"
						name="firstname"
						class="launchwolf-form-control launchwolf-bordered"
						required
					/>
					<input
						type="email"
						value=""
						placeholder="Your Email"
						name="email"
						class="launchwolf-form-control launchwolf-bordered"
						required
					/>
					<small class="launchwolf-subscribe-form-small-text"
						>Low volume, unsubscribe anytime, no spam.</small
					>
					<!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
					<div
						style="position: absolute; left: -5000px;"
						aria-hidden="true"
					>
						<input
							type="text"
							name="launchwolf-honeypot"
							tabindex="-1"
							value=""
						/>
					</div>

					<button
						type="submit"
						name="subscribe"
						class="launchwolf-subscribe-button"
					>
						Subscribe
					</button>
					<div
						style="display: none;"
						role="alert"
						class="launchwolf-alert launchwolf-alert-success"
					>
						Thanks for signing up!
					</div>

					<div
						style="display: none;"
						role="alert"
						class="launchwolf-alert launchwolf-alert-error"
					>
						There was a problem signing up. Please try again. If
						this persists, please contact us.
					</div>
				</form>
			</div>
			<!-- End LaunchWolf Subscribe Form -->
		</main>
		<!-- Begin LaunchWolf Subscribe Form Handler -->
		<script>
			async function launchwolf_subscribeFormSubmitted(event) {
				event.preventDefault()
				const form = event.target
				const method = form.getAttribute("method")
				const url = form.getAttribute("action")
				const allInputs = form.querySelectorAll("input")
				const reservedProperties = ["email", "launchwolf-honeypot"]
				const body = { properties: {} }
				for (var input of allInputs) {
					if (reservedProperties.includes(input.name)) {
						body[input.name] = input.value
					} else {
						body.properties[input.name] = input.value
					}
				}
				const successAlert = form.querySelector(
					".launchwolf-alert-success"
				)
				const errorAlert = form.querySelector(".launchwolf-alert-error")
				try {
					const response = await fetch(url, {
						method: method,
						body: JSON.stringify(body),
					})
					const responseBody = await response.json()
					if (!responseBody) {
						throw new Error()
					}
					successAlert.style.display = "block"
					errorAlert.style.display = "none"
					console.log(
						"submit called: ",
						method,
						url,
						body,
						responseBody
					)
				} catch (error) {
					successAlert.style.display = "none"
					errorAlert.style.display = "block"
				}
				return false
			}
		</script>
		<!-- End LaunchWolf Subscribe Form Handler -->
	</body>
</html>
